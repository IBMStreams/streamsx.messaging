<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Operator KafkaConsumer"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_operator"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Operator KafkaConsumer</title>
</head>
<body id="spldoc_operator">


<h1 class="title topictitle1">Operator <tt class="ph tt">KafkaConsumer</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Messaging Toolkit Doc</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.messaging.html">com.ibm.streamsx.messaging 5.1.0</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.messaging.kafka.html">com.ibm.streamsx.messaging.kafka</a> &gt; KafkaConsumer</p>

</div>

<div class="section splprimop">
  <embed class="image" src="../../image/tk$com.ibm.streamsx.messaging/op$com.ibm.streamsx.messaging.kafka$KafkaConsumer.svg" width="672" height="112"/>
</div>

<div class="section">

<p class="p">This operator acts as a Kafka consumer receiving messages for one or more topics. Ordering of messages is only guaranteed per Kafka topic partition. Specify properties as described here: http://kafka.apache.org/documentation.html#configuration. If you are using Java security modules for login/authentication, ensure that they are compatible with IBM Java, as IBM Streams only runs with IBM Java. The SPL Attribute Types supported are rstring, ustring, and blob. The topic must be of type rstring/ustring, while the key and message must be of the same type (rstring, ustring, or blob). 
</p>

<p class="p"><strong class="ph b">Kafka 0.9 Server Support</strong>: By default this toolkit builds with Kafka 0.10 client JARs. The Kafka 0.10 client is not compatible with Kafka 0.9 brokers. To use this operator with Kafka 0.9 brokers, you must rebuild with the kafka-0.9 target after cleaning. From the toolkit root directory: 
</p>

<p class="p"> ant clean
</p>

<p class="p"> ant kafka-0.9
</p>

<p class="p"><strong class="ph b">AppConfig</strong>: You must provide properties for the operator using at least one of the following parameters: kafkaProperty, propertiesFile, or appConfigName. The hierarchy of properties goes: properties from appConfig beat out kafkaProperty parameter properties, which beat out properties from the propertiesFile. The threadsPerTopic parameter has been removed since the upgrade to Kafka 0.9. This is because the new KafkaConsumer is single-threaded. Due to a bug in Kafka (eventually getting resolved by KAFKA-1894), when authentication failure occurs or connection to Kafka brokers is lost, we will not be able to pick up new properties from the PropertyProvider. The workaround is to manually restart the KafkaConsumer PE after properties have been updated. New properties will then be picked up. 
</p>

<p class="p"><strong class="ph b">Behavior in a Consistent Region</strong> This operator can be used inside a consistent region. Operator driven and periodical checkpointing are supported. Partitions to be read from must be specified. Resetting to initial state is not supported because the intial offset cannot be saved and may not be present in the Kafka log. In the case of a reset to initial state after operator crash, messages will start being read from the time of reset.
</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Summary</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Ports</dt>

  <dd class="dd">This operator has 0 input port and 1 output port.</dd>

 
 
  <dt class="dt dlterm">Windowing</dt>

  <dd class="dd">This operator does not accept any windowing configurations.</dd>

 
 
  <dt class="dt dlterm">Parameters</dt>

  <dd class="dd">This operator supports 12 parameters.
<p class="p"> Required: 
<a class="xref" href="#spldoc_operator__parameter__topic">topic</a>

</p>

<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__appConfigName">appConfigName</a>, <a class="xref" href="#spldoc_operator__parameter__appConfigPropertyName">appConfigPropertyName</a>, <a class="xref" href="#spldoc_operator__parameter__consumerPollTimeout">consumerPollTimeout</a>, <a class="xref" href="#spldoc_operator__parameter__jaasFile">jaasFile</a>, <a class="xref" href="#spldoc_operator__parameter__jaasFilePropName">jaasFilePropName</a>, <a class="xref" href="#spldoc_operator__parameter__kafkaProperty">kafkaProperty</a>, <a class="xref" href="#spldoc_operator__parameter__keyAttribute">keyAttribute</a>, <a class="xref" href="#spldoc_operator__parameter__messageAttribute">messageAttribute</a>, <a class="xref" href="#spldoc_operator__parameter__partition">partition</a>, <a class="xref" href="#spldoc_operator__parameter__propertiesFile">propertiesFile</a>, <a class="xref" href="#spldoc_operator__parameter__triggerCount">triggerCount</a>

</p>
</dd>

 
 
  <dt class="dt dlterm">Metrics</dt>

  <dd class="dd">This operator does not report any metrics.</dd>

 
</dl>
</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Properties</h2>

<dl class="dl" compact="compact">
 
  <dt class="dt dlterm">Implementation</dt>

  <dd class="dd">Java</dd>

 
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set">Output Ports</a></strong></p>
<dl class="dl">
  
     <dt class="dt dlterm">Assignments</dt>

       <dd class="dd">Java operators do not support output assignments.
       </dd>

  
</dl>

<dl class="dl">
  
   <dt class="dt dlterm">Ports (0)</dt>

   <dd class="dd">

<p class="p">Messages received from Kafka are sent on this output port.
</p>

<p class="p"/>

   <dl class="dl">
    
      <dt class="dt dlterm">Properties</dt>

      <dd class="dd">
   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__optional">Optional</a>: false
     </li>

   </ul>

   <ul class="sl simple">
     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__output_port_set__windowpunctuationoutputmode">WindowPunctuationOutputMode</a>: Free
     </li>

   </ul>

      </dd>

    
   </dl>

   <p class="p"/>

   </dd>

  
</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters">Parameters</a></strong></p>
This operator supports 12 parameters.
<p class="p"> Required: 
<a class="xref" href="#spldoc_operator__parameter__topic">topic</a>

</p>

<p class="p"> Optional: 
<a class="xref" href="#spldoc_operator__parameter__appConfigName">appConfigName</a>, <a class="xref" href="#spldoc_operator__parameter__appConfigPropertyName">appConfigPropertyName</a>, <a class="xref" href="#spldoc_operator__parameter__consumerPollTimeout">consumerPollTimeout</a>, <a class="xref" href="#spldoc_operator__parameter__jaasFile">jaasFile</a>, <a class="xref" href="#spldoc_operator__parameter__jaasFilePropName">jaasFilePropName</a>, <a class="xref" href="#spldoc_operator__parameter__kafkaProperty">kafkaProperty</a>, <a class="xref" href="#spldoc_operator__parameter__keyAttribute">keyAttribute</a>, <a class="xref" href="#spldoc_operator__parameter__messageAttribute">messageAttribute</a>, <a class="xref" href="#spldoc_operator__parameter__partition">partition</a>, <a class="xref" href="#spldoc_operator__parameter__propertiesFile">propertiesFile</a>, <a class="xref" href="#spldoc_operator__parameter__triggerCount">triggerCount</a>

</p>
<dl class="dl">

<dt class="dt dlterm"><a name="spldoc_operator__parameter__appConfigName"><!-- --></a><tt class="ph tt">appConfigName</tt></dt>

<dd class="dd">
<p class="p">This parameter specifies the name of application configuration that stores client properties, the property specified via application configuration is overridden by the properties file and kafkaProperty parameter. The hierarchy of properties goes: properties from appConfig beat out kafkaProperty parameter properties, which beat out properties from the propertiesFile. 
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__appConfigPropertyName"><!-- --></a><tt class="ph tt">appConfigPropertyName</tt></dt>

<dd class="dd">
<p class="p">List of Kafka properties to retrieve from application configuration. The property name in the application configuration must the same as the Kafka property name. You may also supply jaasFile as a property name to act as the jaasFile parameter value.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__consumerPollTimeout"><!-- --></a><tt class="ph tt">consumerPollTimeout</tt></dt>

<dd class="dd">
<p class="p">The time, in milliseconds, spent waiting in poll if data is not available. If 0, returns immediately with any records that are available now. Must not be negative. Default is 100.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: int32
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__jaasFile"><!-- --></a><tt class="ph tt">jaasFile</tt></dt>

<dd class="dd">
<p class="p">Location of the jaas file to be used for SASL connections. Jaas file is recommended to be stored in the etc directory.  If a relative path is specified, the path is relative to the application directory.This sets the system property java.security.auth.login.config. This can also be set using the appConfig by specifying jaasFile=&lt;jaas.conf location&gt;.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__jaasFilePropName"><!-- --></a><tt class="ph tt">jaasFilePropName</tt></dt>

<dd class="dd">
<p class="p">This parameter specifies the property name of the jaasFile location in the application configuration. The default name is jaasFile. 
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__kafkaProperty"><!-- --></a><tt class="ph tt">kafkaProperty</tt></dt>

<dd class="dd">
<p class="p">Specify a Kafka property "key=value" form. This will override any property specified in the properties file. The hierarchy of properties goes: properties from appConfig beat out kafkaProperty parameter properties, which beat out properties from the propertiesFile. 
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__keyAttribute"><!-- --></a><tt class="ph tt">keyAttribute</tt></dt>

<dd class="dd">
<p class="p">Name of the attribute for the key. Default is "key".
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__messageAttribute"><!-- --></a><tt class="ph tt">messageAttribute</tt></dt>

<dd class="dd">
<p class="p">Name of the attribute for the message. If this parameter is not specified, then by default the operator will look for an attribute named "message". If the "message" attribute is not found, a runtime error will be returned.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__partition"><!-- --></a><tt class="ph tt">partition</tt></dt>

<dd class="dd">
<p class="p">Partition to be subscribed to. 1 or more can be provided using comma separation. You may only specify 1 topic if you are specifying partitions. Ex: 0,2,3
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: int32
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__propertiesFile"><!-- --></a><tt class="ph tt">propertiesFile</tt></dt>

<dd class="dd">
<p class="p">Properties file containing kafka properties. Properties file is recommended to be stored in the etc directory.  If a relative path is specified, the path is relative to the application directory. The hierarchy of properties goes: properties from appConfig beat out kafkaProperty parameter properties, which beat out properties from the propertiesFile. 
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__topic"><!-- --></a><tt class="ph tt">topic</tt></dt>

<dd class="dd">
<p class="p">Topic to be subscribed to. 1 or more can be provided using comma separation. Ex: "mytopic1","mytopic2"
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: rstring
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: false
     </li>

  </ul>

 </dd>


</dl>

</dd>



<dt class="dt dlterm"><a name="spldoc_operator__parameter__triggerCount"><!-- --></a><tt class="ph tt">triggerCount</tt></dt>

<dd class="dd">
<p class="p">Approximate number of messages between checkpointing for consistent region. This is only relevant to operator driven checkpointing. Checkpointing is done after a buffer of messages is submitted, so actual triggerCount at checkpoint time may be slightly above specified triggerCount.
</p>
<dl class="dl">

 <dt class="dt dlterm">Properties </dt>

 <dd class="dd">
  <ul class="sl simple">
  <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__type">Type</a>: int32
  </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__cardinality">Cardinality</a>: 1
     </li>

     <li class="sli"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__parameters__parameter__optional">Optional</a>: true
     </li>

  </ul>

 </dd>


</dl>

</dd>


</dl>

</div>

<div class="section">
<p class="p splhead-1"><strong class="ph b"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies">Libraries</a></strong></p>

 <dl class="dl">
 
  <dt class="dt dlterm">Operator class library
  </dt>

  <dd class="dd"/>

  <dd class="dd"><a class="xref" href="../references/OperatorModel.html#spldoc_reference_operator_model__context__dependencies__managedlibrary__libpath">Library Path</a>: <tt class="ph tt">../../impl/lib/com.ibm.streamsx.messaging.jar, ../../opt/downloaded/*, ../../opt/*</tt></dd>

 
 </dl>

</div>

</div>


</body>
</html>